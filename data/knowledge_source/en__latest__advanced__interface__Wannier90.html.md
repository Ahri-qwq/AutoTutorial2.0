# https://abacus.deepmodeling.com/en/latest/advanced/interface/Wannier90.html

> Source: https://abacus.deepmodeling.com/en/latest/advanced/interface/Wannier90.html

# Wannier90[#](#wannier90)

[Wannier90](http://www.wannier.org/) is a useful package to generating the maximally-localized Wannier functions (MLWFs), which can be used to compute advanced electronic properties. Some post-processing tools (such as WannierTools, etc.) will use MLWFs for further analysis and calculations.

[examples/interface_wannier90/](https://github.com/abacusmodeling/abacus-develop/tree/develop/examples/interface_wannier90).

`ABACUS_towannier90_pw/`

folder, prepare a Wannier90 input file`diamond.win`

, which is the main input file for Wannier90. Then To generate`diamond.nnkp`

file by running Wannier90, which ABACUS will read later:wannier90 -pp diamond.win

The content of

`diamond.win`

is as follows:Do a self-consistent calculation and get the converged charge density:

cp INPUT-scf INPUT cp KPT-scf KPT mpirun -np 4 abacus

Do a non-self-consistent calculation:

cp INPUT-nscf INPUT cp KPT-nscf KPT mpirun -np 4 abacus

below are the INPUT file (nscf):

There are seven interface-related parameters in the

`INPUT`

file:[towannier90](../input_files/input-main.html#towannier90):`1`

, generate files for wannier90 code;`0`

, do not generate.[nnkpfile](../input_files/input-main.html#nnkpfile): the name of the file generated by running “wannier90 -pp …”.[wannier_spin](../input_files/input-main.html#wannier-spin): If you use nspin=2,`up`

: calculate the Wannier functions for the spin up components ;`down`

: calculate the Wannier functions spin down components.[out_wannier_mmn](../input_files/input-main.html#out-wannier-mmn): control whether to output the “*.mmn” file.[out_wannier_amn](../input_files/input-main.html#out-wannier-amn): control whether to output the “*.amn” file.[out_wannier_eig](../input_files/input-main.html#out-wannier-eig): control whether to output the “*.eig” file.[out_wannier_unk](../input_files/input-main.html#out-wannier-unk): control whether to output the “UNK.*” file.[out_wannier_wvfn_formatted](../input_files/input-main.html#out-wannier-wvfn-formatted): control what format of the Wannier function file to output,`true`

: output the formatted text file;`false`

: output the binary file. Note that the`wvfn_formatted`

option in`*.win`

file (input file of Wannier90) has to be set accordingly with this option.

**Note: You need to turn off the symmetry during the entire nscf calculation.**`KPT`

file according to the`diamond.win`

file, which is similar to “begin kpoints …” in the`diamond.win`

file:`diamond.amn`

,`diamond.mmn`

,`diamond.eig`

,`UNK`

files in the`OUT.`

folder which are input files needed by Wannier90 code.Copy

`.amn`

,`.mmn`

,`.eig`

,`UNK`

file to`wannier/`

folder, to get the MLWFs by running Wannier90:wannier90 diamond.win


Notes:

The ABACUS-wannier90 interface can be used in both PW and LCAO basis.

`wvfn_formatted = .true.`

in`diamond.win`

, otherwise Wannier90 code cannot read files generated by ABACUS because these files are not binary files. You also have to generate the`diamond.amn`

and`UNK`

files for the plot. Otherwise, the two types of file are not necessary.
