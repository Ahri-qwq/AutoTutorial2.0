<!-- META_START -->
# ABACUS 实战教程：晶体弹性常数计算与力学性质分析

## 前言
- **本书逻辑**: 本教程遵循“理论基础 -> 关键预处理 -> 标准化工作流 -> 进阶案例分析”的教学逻辑。首先阐明应力-应变法的物理本质，随后强调计算前结构弛豫的重要性，接着以 Si 为例详解 `abacustest` 自动化流程，最后通过 TiO2 案例展示低对称性体系的处理与数据验证。
- **核心知识点**: 弹性张量 ($C_{ijkl}$)、广义胡克定律、Voigt 记号、应力-应变法、`abacustest` 工作流、Born 稳定性判据、宏观模量 (B, G, E, $\nu$) 计算。

<!-- CHAPTER_START -->
## 第一章：弹性力学基础与计算原理
**本章逻辑**: 在动手计算前，必须理解弹性常数的物理定义及其与晶体对称性的关系，这是正确设置计算参数和分析结果的前提。

### Section 1.1: 弹性张量与广义胡克定律
- **内容**: 介绍应力 ($\sigma$) 与应变 ($\epsilon$) 的二阶张量性质，引出描述两者线性关系的四阶弹性张量。解释胡克定律在晶体中的表达形式。
- **关键参数**: 无

### Section 1.2: Voigt 记号与对称性约化
- **内容**: 详解如何利用 Voigt 记号将 81 个分量的四阶张量简化为 $6 \times 6$ 矩阵。介绍晶体对称性对独立弹性常数个数的限制（如立方晶系仅 3 个独立分量，四方晶系 6 个），以及 IEEE 标准取向的重要性。
- **关键参数**: 无

### Section 1.3: 第一性原理计算方法：应力-应变法
- **内容**: 阐述通过施加微小应变并计算对应应力来拟合弹性常数的基本原理。对比“原子位置弛豫 (Relaxed-ion)”与“原子位置固定 (Clamped-ion)”的区别。
- **关键参数**: `cal_stress` (必须开启)

<!-- CHAPTER_START -->
## 第二章：计算准备：零应力基态结构的获取
**本章逻辑**: 弹性常数定义在平衡位置附近。如果初始结构存在残余应力，会导致计算结果出现巨大误差。本章重点讲解如何获得完美的基态结构。

### Section 2.1: 晶胞与原子位置的同时优化
- **内容**: 使用 ABACUS 对初始结构进行变胞优化 (`cell-relax`)。强调收敛标准必须严格，以确保残余应力接近于零。
- **关键参数**: 
    - `calculation`: `cell-relax`
    - `cal_stress`: `1` (用于监控残余应力)
    - `cal_force`: `1`

### Section 2.2: 晶体取向与标准化 (Optional)
- **内容**: 讨论是否需要根据 IEEE 标准旋转晶体（如 Materials Project 数据库的做法）。对于 Si 等立方晶系，说明惯用胞与坐标轴重合的便利性。
- **关键参数**: 无 (涉及结构文件操作)

<!-- CHAPTER_START -->
## 第三章：核心实战：基于 abacustest 的自动化计算流程 (以 Si 为例)
**本章逻辑**: 引入 `abacustest` 工具，以最简单的立方晶系 Si 为例，演示从输入文件生成到结果分析的完整闭环，建立标准操作规范。

### Section 3.1: 自动化工作流环境配置与输入生成
- **内容**: 介绍 `abacustest` 库。演示如何使用 `abacustest lib` 命令生成包含不同应变模式（正应变、剪切应变）的输入文件夹结构 (`deform-xxx`)。解释最大应变幅度的选择（默认 1%）。
- **关键参数**: 
    - `abacustest` 参数: `--norm`, `--shear`
    - ABACUS 参数: `calculation` (默认为 `relax` 以计算 Relaxed-ion 弹性常数)

### Section 3.2: 提交计算与应力张量提取
- **内容**: 批量提交 ABACUS 任务。重点讲解 ABACUS 在此阶段的计算行为：固定晶格形变，优化原子位置，输出应力。
- **关键参数**: 
    - `calculation`: `relax` (注意此处不能用 `cell-relax`)
    - `cal_stress`: `1` (核心参数，必须开启)
    - `cal_force`: `1`

### Section 3.3: 结果后处理与模量拟合
- **内容**: 使用 `abacustest analyze` 收集各变形结构的应力数据，拟合得到弹性张量矩阵。解析输出结果：$C_{11}, C_{12}, C_{44}$ 以及导出的体模量、剪切模量等。
- **关键参数**: 无 (后处理脚本操作)

<!-- CHAPTER_START -->
## 第四章：进阶案例：各向异性与低对称性体系 (以 TiO2 为例)
**本章逻辑**: 从高对称性的 Si 进阶到四方晶系的 TiO2 (金红石相)，展示更复杂的弹性矩阵形态，并引入数据验证与对比的科学方法。

### Section 4.1: 四方晶系的特殊性与独立分量
- **内容**: 分析金红石型 TiO2 的晶体结构及其对应的 6 个独立弹性常数 ($C_{11}, C_{12}, C_{13}, C_{33}, C_{44}, C_{66}$)。
- **关键参数**: 无

### Section 4.2: 完整计算流程复现与注意事项
- **内容**: 快速复现 TiO2 的计算流程。重点讨论在低对称性体系中，如何检查拟合结果是否符合对称性要求（例如理论上应为 0 的分量是否足够小）。
- **关键参数**: `symmetry` (建议检查是否需要设为 0 以防止对称性破缺导致的报错，视具体版本而定)

### Section 4.3: 数据验证与实验对比
- **内容**: 将计算结果与 Materials Project 数据库及实验值进行对比表格制作。讨论 DFT 计算值与实验值的常见偏差范围及其物理来源（如温度效应、DFT 泛函误差）。
- **关键参数**: 无

<!-- APPENDIX_START -->
## 附录：常见问题与进阶建议
- **文件管理风险**: 警告不要在计算完成后重复执行 `abacustest` 的准备命令，以免覆盖数据。
- **Clamped-ion 计算**: 如何通过设置 `--norelax` (对应 `calculation='scf'`) 计算不含原子弛豫的高频弹性常数。
- **收敛性陷阱**: 应变过大导致结构相变或 SCF 不收敛的解决方案。
- **单位换算**: 强调 ABACUS 输出单位（通常为 kBar）与文献常用单位（GPa）的换算关系。