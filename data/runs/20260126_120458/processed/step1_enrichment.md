根据您提供的资料库和 ABACUS 软件特性，以下是关于 **截断能 (Ecut) 收敛性测试** 的结构化元数据报告。

---

## 1. 物理本质 (Physics Concepts)

*   **核心物理概念**: 平面波基组展开 (Plane Wave Basis Set Expansion)。
*   **科学问题**: 
    *   在基于平面波 (PW) 的密度泛函理论 (DFT) 计算中，波函数通过平面波基组展开。理论上需要无穷多的平面波才能精确描述，但在实际计算中必须在某个动能处截断。
    *   **截断能 (Cutoff Energy)** 决定了基组的大小。该测试旨在寻找一个最小的截断能数值，使得系统总能量（及其他物理量）收敛到化学精度允许的误差范围内，从而在计算精度和计算成本（内存、时间）之间取得平衡。

## 2. 关键输入参数 (Key Parameters)

### **INPUT 文件**

| 参数名 | 推荐值/范围 | 物理意义与说明 |
| :--- | :--- | :--- |
| **ecutwfc** | **范围**: 20 ~ 120 Ry (具体取决于赝势)<br>**步长**: 5 或 10 Ry | **[核心参数]** 控制平面波波函数的动能截断值（单位通常为 Ry）。<br>该值越大，包含的平面波基矢量越多，能描述更剧烈震荡的波函数（如深层轨道），计算越精确，但计算量和内存消耗呈指数级增长。 |
| **basis_type** | `pw` | **[基组选择]** 资料明确指出 Ecut 收敛测试“只对平面波有效”或在 PW 基组下进行。虽然 LCAO 模式也有格点积分的截断能，但本 Topic 主要针对 PW 基组的波函数截断。 |
| **suffix** | (自定义，如 `N_ecut_60`) | **[文件管理]** 用于区分不同 Ecut 测试任务的输出目录后缀，便于脚本批量处理和数据提取。 |

### **【重要】知识缺口处理**
*   **双重截断能 (`ecutrho`)**: 资料中未明确提及电荷密度截断能 (`ecutrho`) 与 `ecutwfc` 的比例关系（在某些软件中默认为 4 倍）。**撰写时请提醒读者查阅官方文档确认 `ecutrho` 是否有默认倍数设置，或是否需要显式设置。**
*   **收敛标准**: 资料中提到了能量差小于 `1 meV/atom` 作为收敛判据，但未提及力 (Force) 或应力 (Stress) 的收敛对 Ecut 的敏感度。若涉及结构弛豫，需查阅文档确认是否需要更高的 Ecut。

## 3. 体系与接口配置 (System & Interfaces)

*   **结构 (STRU)**: 
    *   使用标准的晶胞结构即可。
    *   在测试过程中，**必须保持 STRU 文件（晶格常数、原子位置）完全不变**，仅改变 INPUT 中的 `ecutwfc`。
*   **外部接口**:
    *   **Shell 脚本 (Bash)**: 用于自动化测试。需要使用循环结构 (`for` loop) 遍历 `ecutwfc` 的值。
    *   **文本处理工具 (`sed`, `grep`)**: 
        *   `sed`: 用于修改 INPUT 文件中的 `ecutwfc` 和 `suffix` 参数。
        *   `grep`: 用于从输出日志中提取总能量。
    *   **绘图工具 (Origin/Python)**: 用于绘制 E_total vs. Ecut 曲线。
*   **接口注意事项**:
    *   提取能量时，目标文件通常是 `running_scf.log` (资料 2, 7) 或 `OUT.${suffix}` 文件夹下的日志。
    *   需提取的关键词通常为 `final etot is` (资料 1, 7) 或 `final e tote is` (资料 1)。请注意不同版本 ABACUS 输出关键词可能存在的细微差异（如 `etot` vs `e tote`）。

## 4. 教程编写特殊指令 (Special Instructions for Writer)

*   **Critical (脚本自动化)**: 
    *   必须强调**不要手动**修改参数运行。教程应提供一个通用的 Bash 脚本模板（参考资料 1 和 7），展示如何使用 `sed -i` 修改 `ecutwfc` 并通过 `mpirun` 提交计算。
    *   **重点提示**: 脚本中修改 `suffix` 是为了防止输出文件相互覆盖，这是新手常犯的错误。
*   **Critical (收敛判据)**: 
    *   明确指出收敛不仅仅看能量是否“变平”，还要看能量差是否满足精度要求（如资料 2 提到的 `< 1 meV/atom`）。
    *   提醒读者：不同的赝势（Hard vs. Soft）对 Ecut 的需求差异巨大。不能直接照搬教程中的 60 Ry，而应从较低值开始扫描。
*   **Critical (数据提取)**:
    *   资料 6 提到了 `istate.info`，但资料 1, 2, 7 均使用 `running_scf.log`。**建议以 `running_scf.log` 为主**，因为它是标准的 SCF 输出文件，通用性更强。
*   **风险提示**: 
    *   资料中关于 `ecutrho`（电荷密度截断能）的描述缺失。在 PW 计算中，通常 `ecutrho` 需要大于 `ecutwfc`。撰稿时请注明：“本教程仅关注波函数截断能 `ecutwfc`，关于电荷密度截断能的设置请参考官方手册默认值。”

## 5. 常见报错与注意事项 (Pitfalls)

*   **内存溢出 (OOM)**: 设置过大的 `ecutwfc` 会导致内存消耗急剧增加，可能导致节点崩溃。建议测试范围不要无限制扩大（如无必要，不要超过 120-150 Ry，除非是极硬的赝势）。
*   **核心数选择**: 资料 2 提到，MPI 并行核数不要远超过原子数（例如 16 个原子用 16 核或更少）。过多的核数在小体系下不仅不会加速，反而因通讯开销降低效率。
*   **基准线漂移**: 严禁在测试 Ecut 的过程中改变 k 点 (`KPT`) 或结构 (`STRU`)，否则能量变化将失去比较意义。
*   **赝势依赖性**: 必须强调 Ecut 的收敛性是由**赝势**决定的。更换赝势文件后，必须重新进行 Ecut 收敛性测试。