根据您提供的核心案例（混合规范 RT-TDDFT）及相关知识库，以下是为 **实时含时 DFT (rt-TDDFT) 激发态模拟** 准备的结构化元数据。

---

# Metadata: ABACUS rt-TDDFT (Hybrid Gauge Focus)

## 1. 物理本质 (Physics Concepts)
- **核心概念**: 
    - **实时传播 (Real-time propagation)**: 基于 Runge-Gross 定理，通过构建时间传播子迭代求解含时 Kohn-Sham (TDKS) 方程，直接演化电子波函数。
    - **混合规范 (Hybrid Gauge)**: 一种针对数值原子轨道 (NAO/LCAO) 基组优化的规范形式。它在哈密顿量中引入依赖于矢势的局域相位因子，修正了传统速度规范 (Velocity Gauge) 在有限基组下忽略轨道内部相位变化导致的系统性误差。
    - **光与物质相互作用**: 通过在哈密顿量中引入含时外场（如电场）来模拟激发过程。
- **解决的科学问题**:
    - **周期性体系的激发态动力学**: 解决长度规范 (Length Gauge) 无法用于周期性体系、而传统速度规范在小基组下误差大的两难问题。
    - **非线性响应**: 模拟强场激发、高次谐波产生 (HHG)、非线性光学响应。
    - **超快过程**: 研究飞秒/阿秒尺度的载流子弛豫、电荷与能量输运。

## 2. 关键输入参数 (Key Parameters)

> **注意**: 部分具体控制参数在提供的文本片段中未明确列出参数名，需查阅官方文档补充。

### 基础控制
- **INPUT 文件参数**: `calculation`
    - **推荐值**: `md`
    - **物理意义**: 开启分子动力学/时间演化模式。
- **INPUT 文件参数**: `esolver_type`
    - **推荐值**: `tddft`
    - **物理意义**: 指定电子求解器为含时密度泛函理论求解器。

### 激发与演化设置
- **INPUT 文件参数**: `md_dt`
    - **推荐值**: 需根据物理过程设定（通常为阿秒级，远小于离子动力学步长）。
    - **物理意义**: 时间演化的步长。
- **INPUT 文件参数**: `md_nstep`
    - **推荐值**: 根据总模拟时间决定。
    - **物理意义**: 总的时间步数。
- **INPUT 文件参数**: `nbands`
    - **推荐值**: **必须显著大于占据态数目**。
    - **物理意义**: 包含足够的空带以允许电子跃迁到高能级。

### 【重要】知识缺口处理 (Missing Parameters)
以下参数在提供的文本中主要以理论形式出现，未给出具体的 `INPUT` 关键词，**撰写教程时需查阅 ABACUS 在线文档确认**：
1.  **规范选择 (Gauge Selection)**: 
    - 需确认用于切换 "Length Gauge", "Velocity Gauge", "Hybrid Gauge" 的具体参数名（例如可能是 `td_gauge` 或类似名称）。
    - **关键点**: 必须找到开启 **Hybrid Gauge** 的开关。
2.  **外场定义 (External Field)**:
    - 需确认定义电场形式（高斯脉冲、阶跃场等）、电场强度 ()、极化方向、频率的参数名（例如 `td_efield`, `td_field_amp` 等）。
3.  **输出控制**:
    - 需确认如何输出电流密度 ()、偶极矩等随时间变化的物理量。

## 3. 体系与接口配置 (System & Interfaces)
- **结构 (STRU)**: 
    - 适用于 **周期性体系** (Solids) 和 **非周期性体系** (Molecules/Clusters)。
    - 混合规范特别优势在于 **周期性体系**。
- **基组 (Basis Set)**: 
    - **数值原子轨道 (NAO)**: 本方法（混合规范）是专门为解决 NAO 基组在速度规范下的相位误差而设计的。
    - 需确保 `orbital_dir` 指向正确的轨道文件。
- **外部接口**:
    - 通常涉及后处理脚本来分析输出的电流/偶极矩数据，以获得吸收谱（如对时间信号做傅里叶变换）。

## 4. 教程编写特殊指令 (Special Instructions for Writer)

- **Critical (核心卖点)**: 
    - 必须强调 **混合规范 (Hybrid Gauge)** 的独特性。它是 ABACUS 的特色功能之一。
    - 解释逻辑链：长度规范破坏周期性 -> 必须用速度规范 -> 速度规范在 LCAO 下有相位误差 -> **混合规范完美解决了这个问题**（既保留周期性，又修正了相位误差，且计算效率高于单纯增大基组）。
- **对比分析**:
    - 在教程中应展示或引用案例（如 Si 单胞），说明如果使用传统速度规范（Velocity Gauge）在低频区会有发散/误差，而混合规范结果准确。
- **参数警示**:
    - 提醒用户：做 rt-TDDFT 时，`nbands` (能带数) 必须手动设置得足够大，不能只包含占据态，否则电子无法激发。
- **风险提示 (Risk Note)**:
    - **资料缺失提醒**: 由于 Reference 中未提供具体的“开启混合规范”和“设置电场”的参数名，请在 Step 3 撰写时明确标注：“具体开启混合规范及设置电场参数（如 `td_gauge` 等），请务必参考 ABACUS 官方文档中关于 TDDFT 输入参数的最新说明。”

## 5. 常见报错与注意事项 (Pitfalls)
- **基组收敛性**: 虽然混合规范改善了结果，但过小的基组仍可能限制描述高能激发态的能力。
- **时间步长 (Time Step)**: 电子动力学的时间尺度（阿秒）比原子核动力学（飞秒）快得多。如果 `md_dt` 设置过大（如常规 MD 的 1.0 fs），计算会发散或结果完全错误。
- **计算成本**: rt-TDDFT 计算量巨大，尤其是需要演化很长时间以获得高分辨率光谱时。
- **对称性破坏**: 加外场通常会破坏空间对称性，计算时可能需要关闭部分对称性分析（`symmetry` 参数可能受影响，需确认）。