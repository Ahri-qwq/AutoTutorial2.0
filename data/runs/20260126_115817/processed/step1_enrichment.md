根据提供的参考资料，以下是关于 **赝势与轨道包 (UPF/APNS) 匹配指南** 的结构化元数据报告：

# 1. 物理本质 (Physics Concepts)
- **核心物理概念**: 
    - **赝势 (Pseudopotential, PP)**: 在 DFT Hamiltonian 中代替 $-Z/|r-R|$ 项，决定元素的化学性质。ABACUS 主要支持模守恒赝势 (Norm-Conserving, NC) 和 ONCV 赝势，格式通常为 UPF。
    - **数值原子轨道 (Numerical Atomic Orbitals, NAO)**: LCAO 基组下的基函数。必须与特定的赝势严格匹配（由特定赝势生成），以保证计算精度。
    - **完备性与效率**: 轨道的数量（如 3s3p2d）和截断半径（rcut）决定了基组的完备性和计算效率。
- **解决的科学问题**: 
    - 平衡第一性原理计算的**精度**（接近全电子/平面波结果）与**效率**（稀疏矩阵、低计算量）。
    - 解决 LCAO 模式下，用户难以自行生成高质量轨道、难以确定轨道与赝势是否匹配的痛点。

# 2. 关键输入参数 (Key Parameters)

## INPUT 文件参数
| 参数名 | 推荐值 / 设定方式 | 物理意义 |
| :--- | :--- | :--- |
| **ecutwfc** | **需根据赝势文件建议设置**<br>(例如 APNS 轨道文件名中常包含推荐值，如 `100Ry`) | **波函数平面波截断能** (单位: Ry)。<br>即便在 LCAO 模式下，模守恒赝势的局域部分及部分物理量仍需平面波网格处理。该值过低会导致结果错误，过高会降低效率。 |
| **ecutrho** | 通常为 `4 * ecutwfc` | **电荷密度截断能**。<br>控制实空间积分网格的密度。 |
| **basis_type** | (资料未明确参数名，暗示为 LCAO 或 PW) | **基组类型选择**。<br>资料 4 和 5 提及：若使用平面波 (PW) 基组，则不需要提供 `.orb` 文件；若使用数值轨道，则需提供。 |

## 【重要】知识缺口处理
- **轨道与赝势的具体指定方式**: 资料中提到了在 `STRU` 中准备文件，但未明确列出 `STRU` 文件中指定 `.upf` 和 `.orb` 路径的具体关键词（如 `ATOMIC_SPECIES` 模块下的格式）。**撰写时请提醒读者查阅 ABACUS 官方文档中关于 STRU 文件的 `ATOMIC_SPECIES` 写法。**
- **超软赝势支持**: 资料 1 提到“新实现的对超软赝势进行测试”，但资料 4 明确说“目前不支持 PAW 或超软”。**撰写时需保守处理，强调目前主要支持模守恒 (Norm-Conserving/ONCV) 赝势，超软赝势可能处于实验阶段。**

# 3. 体系与接口配置 (System & Interfaces)

- **结构 (STRU) 特殊要求**:
    - 必须同时提供 **赝势文件 (*.upf)** 和 **轨道文件 (*.orb)**（仅限 LCAO 模式）。
    - 轨道文件必须是由该特定赝势生成的，严禁随意混用。
- **外部接口**:
    - **AIS-Square / GitHub**: 下载 APNS 赝势-轨道捆绑包 (APNS-PPORB)。
    - **CP2K**: 可利用 CP2K 的赝势生成 ABACUS 可读的 UPF 和 ORB 文件（用于对齐精度）。
    - **Quantum ESPRESSO (QE)**: ABACUS 兼容 QE 标准的 UPF 格式赝势（如 SG15）。
- **接口注意事项**:
    - **OFDFT 计算**: 若进行无轨道密度泛函计算，需使用 BLPS 局域赝势，而非 UPF 文件（资料 8）。

# 4. 教程编写特殊指令 (Special Instructions for Writer)

- **Critical (核心强调)**:
    - **匹配性原则**: 必须反复强调“赝势与轨道必须成套使用”。举例：不能拿 SG15 的赝势配其他来源的轨道，除非经过严格测试。
    - **APNS 版本选择**: 明确区分 `efficiency`（效率版）和 `precision`（精度版）的应用场景。
        - *Efficiency*: 结构优化、MD、声子（仅需占据态）。
        - *Precision*: 能带（费米面以上）、TD-DFT、高精度能量（需要空带/高完备性）。
- **文件名解读**:
    - 提示读者学会阅读轨道文件名，例如 `C_gga_9au_100Ry_3s3p2d.orb`：
        - `9au`: 截断半径（影响速度，越大越慢）。
        - `100Ry`: 推荐的 `ecutwfc`。
        - `3s3p2d`: 轨道构型。
- **风险提示**:
    - 明确指出 **APNS-PPORB-v1 版本不支持旋轨耦合 (SOC)** 计算。如果用户需要算 SOC，不能使用当前的 v1 捆绑包。

# 5. 常见报错与注意事项 (Pitfalls)

- **精度陷阱**:
    - 误用 `efficiency` 轨道计算需要高空带精度的性质（如激发态），导致结果不准。
    - `ecutwfc` 设置过低：虽然使用了 LCAO，但积分网格精度不足仍会导致误差（资料 2）。
- **效率陷阱**:
    - 盲目选择过大的轨道截断半径（如文件名中的 `au` 值），会导致计算时间显著增加（资料 4）。
- **文件不匹配**:
    - 在 `STRU` 中指定了轨道文件，但该轨道文件并非由当前指定的赝势生成，可能导致程序报错或物理结果荒谬。
- **OFDFT 混淆**:
    - 误将 UPF 赝势用于 OFDFT 计算（应使用 BLPS）。